# Test Case: Partial Update User (PATCH /users/{id})

| Поле                            | Описание                                                                                                            |
| ------------------------------- | ------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- | ----------------------- | ------------------------ | ----- |
| **Test Case ID**                | TC_API_USERS_PARTIAL_UPDATE_PATCH_POS_004                                                                           |
| **Название**                    | Успешное частичное обновление пользователя                                                                          |
| **Цель теста**                  | Проверить, что API успешно обновляет только указанные поля пользователя методом PATCH при валидных данных           |
| **Тип теста**                   | API / Integration                                                                                                   |
| **Категория**                   | Positive                                                                                                            |
| **Приоритет**                   | Medium                                                                                                              |
| **Теги**                        | users, update, patch, positive, regression                                                                          |
| **Automation Ready**            | Да                                                                                                                  |
| **Предусловия**                 | API и PostgreSQL запущены (Docker); существует пользователь с известным ID в БД                                     |
| **HTTP Метод**                  | PATCH                                                                                                               |
| **Endpoint**                    | `/users/{id}`                                                                                                       |
| **Headers**                     | `Content-Type: application/json`                                                                                    |
| **Query Params**                | —                                                                                                                   |
| **Path Variables**              | `id: number` (валидный ID существующего пользователя)                                                               |
| **Body (Payload)**              | `{ "name": "Partially Updated Name", "phone": "+79997654321" }`                                                     |
| **Источник тестовых данных**    | Генерация части обновленных данных в тесте                                                                          |
| **Ожидаемый HTTP статус**       | `200 OK`                                                                                                            |
| **Ожидаемый Response (Schema)** | `id: number`, `email: string`, `name: string                                                                        | null`, `created_at: datetime`, `phone: string | null`, `address: string | null`, `birth_date: date | null` |
| **Assertions**                  | `status == 200`; `id` соответствует запрошенному; указанные поля обновлены; неуказанные поля остались без изменений |
| **DB Checks (опционально)**     | В таблице `users` запись с указанным `id` содержит обновленные поля и неизмененные старые значения для остальных    |
| **Постусловия**                 | Пользователь восстановлен до начального состояния (cleanup)                                                         |
| **Зависимости**                 | —                                                                                                                   |
